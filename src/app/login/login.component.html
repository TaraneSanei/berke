<div class="flex overflow-y-auto flex-col justify-center items-center min-h-screen">

    <div (click)="openSupport()"
        class="right-0 fixed top-1/2 -translate-y-1/2 z-[70] group cursor-pointer flex items-center">
        <div class="flex items-center h-40 
              bg-[var(--p-accent-900)]/50 backdrop-blur-3xl border-y border-l border-[var(--p-accent-900)]/20 
              rounded-xl transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)]
              translate-x-[calc(100%-1rem)] group-hover:translate-x-0
              hover:bg-[var(--p-accent-900)]/60 hover:border-[var(--p-accent-600)]/50
              shadow-[-10px_0_30px_rgba(0,0,0,0.2)]">

            <div class="w-5 flex flex-col items-center justify-center gap-1.5 h-full">
                <span
                    class="w-1 h-1 rounded-full bg-[var(--p-primary-50)]/50 group-hover:bg-[var(--p-primary-50)]/80 transition-colors"></span>
                <span
                    class="w-1 h-1 rounded-full bg-[var(--p-primary-50)]/50 group-hover:bg-[var(--p-primary-50)]/80 transition-colors"></span>
                <span
                    class="w-1 h-1 rounded-full bg-[var(--p-primary-50)]/50 group-hover:bg-[var(--p-primary-50)]/80 transition-colors"></span>
            </div>

            <div class="overflow-hidden max-w-0 group-hover:max-w-xs transition-all duration-700 ease-in-out">
                <span class="text-[var(--p-primary-50)]/70 text-sm font-medium tracking-widest whitespace-nowrap 
                   [writing-mode:vertical-rl] rotate-180 py-2">
                    پشتیبانی
                </span>
            </div>
        </div>
    </div>
    <div appWindow [opacity]="1" class="flex backdrop-blur-2xl
 flex-col overflow-hidden relative w-1/4 min-w-80 h-100 rounded-xl p-2
 text-right shadow-md text-shadow-white">

        <p-stepper [(value)]="activeStep" class="w-full">
            <!-- login form initialization
                first step phone number -->
            <p-step-panels>
                <form [formGroup]="loginForm">
                    <p-step-panel [value]="1">
                        <ng-template #content let-activateCallback="activateCallback">
                            <div class="flex mb-5 justify-center">
                                <svg class="w-35" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 101">
                                    <path fill="#ffffff00"
                                        d="M188.4,77.88c.04-.18,.08-.35,.12-.53-.92-.31-1.83-.68-2.76-.93-6.93-1.84-14.1-3.07-20.76-5.6-12.23-4.64-22.1-13.14-31.99-21.45-.22-.19-.05-1.32,.28-1.61,3.55-3.04,7.1-6.1,10.79-8.96,9.03-7.01,18.35-13.52,29.76-16.19,1.14-.27,1.64-.09,2.19,1,4.78,9.45,11.16,17.48,20.6,22.69,.53,.29,1.17,.49,1.77,.53,1.24,.08,2.5,.01,3.75,.03,.73,.01,1.45,.08,2.68,.16-1.14-.78-1.84-1.25-2.53-1.73,.91-.33,1.67-.22,2.39,0,4.87,1.54,9.72,3.13,14.59,4.63,.95,.29,1.99,.28,2.99,.41-6.36-2.71-13.85-2.93-18.7-9.79,4.05,.33,7.39,3.07,11.13,1.22-.61-1.19-4.22-2.03-.27-4-2.07-1.15-3.9-2.12-5.68-3.15-7.98-4.59-15.17-10.11-19.16-18.7-1.43-3.07-3.42-5.27-6.09-7.09-.79-.54-1.5-1.24-2.35-1.65-.89-.43-1.92-.87-2.87-.82-9,.46-17.4,3.08-25.31,7.37-11.31,6.14-21.46,13.87-30.87,22.6-1.24,1.15-1.94,1.11-3.21,0-5.4-4.74-10.86-9.44-16.42-14-13.4-10.99-28.24-17.92-46.14-15.79-13.86,1.65-26.14,6.71-35.6,17.32-7.28,8.16-10.86,17.75-9.47,28.81,1.36,10.87,6.97,19.37,15.37,26.08,11.99,9.57,25.85,13.2,40.96,11.77,7.48-.71,14.03-4.38,20.51-8,11.5-6.44,21.6-14.79,31.71-23.13,.88-.73,1.4-.88,2.37-.02,9.48,8.45,19.97,15.58,31.36,21,10.33,4.92,21.47,7.7,33.12,6.25,2.13-.27,4.67-1.58,5.92-3.24,1.15-1.52,2.33-2.1,3.87-2.59,.38-.12,.74-.33,1.1-.5,0-.2,0-.4,0-.6-3.77-.41-7.54-.82-11.31-1.23,.02-.21,.03-.41,.05-.62h2.09Z" />
                                    <path fill="var(--p-primary-50)"
                                        d="M188.4,77.88h-2.09c-.02,.21-.03,.41-.05,.62,3.77,.41,7.54,.82,11.31,1.23,0,.2,0,.4,0,.6-.37,.17-.72,.37-1.1,.5-1.54,.49-2.72,1.07-3.87,2.59-1.25,1.66-3.79,2.98-5.92,3.24-11.65,1.45-22.79-1.33-33.12-6.25-11.39-5.43-21.88-12.56-31.36-21-.97-.86-1.49-.71-2.37,.02-10.11,8.34-20.21,16.69-31.71,23.13-6.48,3.63-13.03,7.29-20.51,8-15.11,1.43-28.96-2.2-40.96-11.77-8.4-6.7-14.01-15.2-15.37-26.08-1.39-11.06,2.2-20.65,9.47-28.81C30.21,13.29,42.5,8.23,56.36,6.57c17.89-2.14,32.73,4.8,46.14,15.79,5.56,4.56,11.01,9.25,16.42,14,1.26,1.11,1.96,1.16,3.21,0,9.41-8.73,19.56-16.46,30.87-22.6,7.91-4.29,16.3-6.91,25.31-7.37,.95-.05,1.98,.4,2.87,.82,.85,.41,1.56,1.11,2.35,1.65,2.67,1.81,4.67,4.02,6.09,7.09,3.99,8.58,11.17,14.1,19.16,18.7,1.79,1.03,3.61,2,5.68,3.15-3.95,1.97-.34,2.81,.27,4-3.75,1.85-7.08-.89-11.13-1.22,4.85,6.86,12.34,7.07,18.7,9.79-1-.13-2.04-.12-2.99-.41-4.88-1.5-9.73-3.09-14.59-4.63-.72-.23-1.48-.34-2.39,0,.69,.47,1.39,.95,2.53,1.73-1.23-.07-1.96-.14-2.68-.16-1.25-.02-2.5,.05-3.75-.03-.6-.04-1.24-.24-1.77-.53-9.44-5.21-15.82-13.25-20.6-22.69-.55-1.09-1.05-1.27-2.19-1-11.41,2.66-20.72,9.18-29.76,16.19-3.69,2.86-7.24,5.92-10.79,8.96-.33,.29-.5,1.42-.28,1.61,9.89,8.31,19.76,16.8,31.99,21.45,6.67,2.53,13.83,3.76,20.76,5.6,.94,.25,1.84,.62,2.76,.93-.04,.18-.08,.35-.12,.53Zm-126.11-3.04c1.24-.12,2.66-.1,4.01-.41,1.82-.42,3.65-.93,5.37-1.66,13.91-5.85,25.72-14.91,37.08-24.63,.19-.16,.08-1.03-.17-1.27-7.11-6.77-14.65-12.99-23.12-18.01-15.86-9.4-34.39-8.72-48.1,1.69-12.56,9.54-13.57,23.54-2.21,34.44,7.47,7.16,16.99,9.27,27.14,9.84Z" />
                                    <path fill="#ffffff00"
                                        d="M62.29,74.83c-10.15-.58-19.67-2.68-27.14-9.84-11.37-10.9-10.35-24.9,2.21-34.44,13.71-10.41,32.24-11.09,48.1-1.69,8.47,5.01,16.01,11.24,23.12,18.01,.25,.24,.36,1.11,.17,1.27-11.36,9.71-23.16,18.77-37.08,24.63-1.72,.72-3.55,1.24-5.37,1.66-1.35,.31-2.77,.3-4.01,.41Z" />
                                </svg>
                            </div>
                            <div class="flex flex-col items-center gap-3 m-1" [ngClass]="{
                                    'slide-in-right' : direction === 'backward' && activeStep === 1 ,
                                    'slide-in-left' : direction === 'forward' && activeStep === 1 ,
                                }">

                                <h2 class="text-xl mb-5">یه قدم تا آرامش...</h2>

                                <div class="w-full mb-3 flex flex-col gap-2">
                                    <p-floatlabel>
                                        <label for="phoneNumber" class="block self-center">شماره تماس</label>
                                        <input pInputText id="phoneNumber" type="tel" class="w-full"
                                            formControlName="phoneNumber" />
                                    </p-floatlabel>
                                    <p-button severity="secondary" variant="text" size="small" label="ثبت نام"
                                        (onClick)="onSignup()"></p-button>
                                </div>
                            </div>
                            <!-- arrow buttons div -->
                            <div class="flex w-full justify-end">
                                <p-button (onClick)="goToStep(2)" [disabled]="!phoneNumber.valid"
                                    icon="pi pi-arrow-left" severity="secondary" variant="text" rounded="true"
                                    size="small"></p-button>
                            </div>
                        </ng-template>
                    </p-step-panel>
                    <!-- the second step, password field -->

                    <p-step-panel [value]="2">
                        <ng-template #content let-activateCallback="activateCallback">
                            <!-- logo div -->
                            <div class="flex mb-5 justify-center">
                                <svg class="w-35" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 101">
                                    <path fill="#ffffff00"
                                        d="M188.4,77.88c.04-.18,.08-.35,.12-.53-.92-.31-1.83-.68-2.76-.93-6.93-1.84-14.1-3.07-20.76-5.6-12.23-4.64-22.1-13.14-31.99-21.45-.22-.19-.05-1.32,.28-1.61,3.55-3.04,7.1-6.1,10.79-8.96,9.03-7.01,18.35-13.52,29.76-16.19,1.14-.27,1.64-.09,2.19,1,4.78,9.45,11.16,17.48,20.6,22.69,.53,.29,1.17,.49,1.77,.53,1.24,.08,2.5,.01,3.75,.03,.73,.01,1.45,.08,2.68,.16-1.14-.78-1.84-1.25-2.53-1.73,.91-.33,1.67-.22,2.39,0,4.87,1.54,9.72,3.13,14.59,4.63,.95,.29,1.99,.28,2.99,.41-6.36-2.71-13.85-2.93-18.7-9.79,4.05,.33,7.39,3.07,11.13,1.22-.61-1.19-4.22-2.03-.27-4-2.07-1.15-3.9-2.12-5.68-3.15-7.98-4.59-15.17-10.11-19.16-18.7-1.43-3.07-3.42-5.27-6.09-7.09-.79-.54-1.5-1.24-2.35-1.65-.89-.43-1.92-.87-2.87-.82-9,.46-17.4,3.08-25.31,7.37-11.31,6.14-21.46,13.87-30.87,22.6-1.24,1.15-1.94,1.11-3.21,0-5.4-4.74-10.86-9.44-16.42-14-13.4-10.99-28.24-17.92-46.14-15.79-13.86,1.65-26.14,6.71-35.6,17.32-7.28,8.16-10.86,17.75-9.47,28.81,1.36,10.87,6.97,19.37,15.37,26.08,11.99,9.57,25.85,13.2,40.96,11.77,7.48-.71,14.03-4.38,20.51-8,11.5-6.44,21.6-14.79,31.71-23.13,.88-.73,1.4-.88,2.37-.02,9.48,8.45,19.97,15.58,31.36,21,10.33,4.92,21.47,7.7,33.12,6.25,2.13-.27,4.67-1.58,5.92-3.24,1.15-1.52,2.33-2.1,3.87-2.59,.38-.12,.74-.33,1.1-.5,0-.2,0-.4,0-.6-3.77-.41-7.54-.82-11.31-1.23,.02-.21,.03-.41,.05-.62h2.09Z" />
                                    <path fill="var(--p-primary-50)"
                                        d="M188.4,77.88h-2.09c-.02,.21-.03,.41-.05,.62,3.77,.41,7.54,.82,11.31,1.23,0,.2,0,.4,0,.6-.37,.17-.72,.37-1.1,.5-1.54,.49-2.72,1.07-3.87,2.59-1.25,1.66-3.79,2.98-5.92,3.24-11.65,1.45-22.79-1.33-33.12-6.25-11.39-5.43-21.88-12.56-31.36-21-.97-.86-1.49-.71-2.37,.02-10.11,8.34-20.21,16.69-31.71,23.13-6.48,3.63-13.03,7.29-20.51,8-15.11,1.43-28.96-2.2-40.96-11.77-8.4-6.7-14.01-15.2-15.37-26.08-1.39-11.06,2.2-20.65,9.47-28.81C30.21,13.29,42.5,8.23,56.36,6.57c17.89-2.14,32.73,4.8,46.14,15.79,5.56,4.56,11.01,9.25,16.42,14,1.26,1.11,1.96,1.16,3.21,0,9.41-8.73,19.56-16.46,30.87-22.6,7.91-4.29,16.3-6.91,25.31-7.37,.95-.05,1.98,.4,2.87,.82,.85,.41,1.56,1.11,2.35,1.65,2.67,1.81,4.67,4.02,6.09,7.09,3.99,8.58,11.17,14.1,19.16,18.7,1.79,1.03,3.61,2,5.68,3.15-3.95,1.97-.34,2.81,.27,4-3.75,1.85-7.08-.89-11.13-1.22,4.85,6.86,12.34,7.07,18.7,9.79-1-.13-2.04-.12-2.99-.41-4.88-1.5-9.73-3.09-14.59-4.63-.72-.23-1.48-.34-2.39,0,.69,.47,1.39,.95,2.53,1.73-1.23-.07-1.96-.14-2.68-.16-1.25-.02-2.5,.05-3.75-.03-.6-.04-1.24-.24-1.77-.53-9.44-5.21-15.82-13.25-20.6-22.69-.55-1.09-1.05-1.27-2.19-1-11.41,2.66-20.72,9.18-29.76,16.19-3.69,2.86-7.24,5.92-10.79,8.96-.33,.29-.5,1.42-.28,1.61,9.89,8.31,19.76,16.8,31.99,21.45,6.67,2.53,13.83,3.76,20.76,5.6,.94,.25,1.84,.62,2.76,.93-.04,.18-.08,.35-.12,.53Zm-126.11-3.04c1.24-.12,2.66-.1,4.01-.41,1.82-.42,3.65-.93,5.37-1.66,13.91-5.85,25.72-14.91,37.08-24.63,.19-.16,.08-1.03-.17-1.27-7.11-6.77-14.65-12.99-23.12-18.01-15.86-9.4-34.39-8.72-48.1,1.69-12.56,9.54-13.57,23.54-2.21,34.44,7.47,7.16,16.99,9.27,27.14,9.84Z" />
                                    <path fill="#ffffff00"
                                        d="M62.29,74.83c-10.15-.58-19.67-2.68-27.14-9.84-11.37-10.9-10.35-24.9,2.21-34.44,13.71-10.41,32.24-11.09,48.1-1.69,8.47,5.01,16.01,11.24,23.12,18.01,.25,.24,.36,1.11,.17,1.27-11.36,9.71-23.16,18.77-37.08,24.63-1.72,.72-3.55,1.24-5.37,1.66-1.35,.31-2.77,.3-4.01,.41Z" />
                                </svg>
                            </div>
                            <!-- main div with animations -->
                            <div class="flex flex-col items-center gap-3 mt-0 m-1" [ngClass]="{
                                    'slide-in-right' : direction === 'backward' && activeStep === 2 ,
                                    'slide-in-left' : direction === 'forward' && activeStep === 2 ,
                                }">
                                <h2 class="text-xl mb-5">یه مکان امن برای ذهنت</h2>

                                <div class="w-full mb-3 flex flex-col gap-2">
                                    <p-floatlabel>
                                        <label for="password" class="block self-center">گذرواژه</label>
                                        <p-password id="password" styleClass="w-full" placeholder="گذرواژه"
                                            inputStyleClass="w-full" [feedback]="false" [toggleMask]="true"
                                            autocomplete="true" formControlName="password" />
                                    </p-floatlabel>
                                    <p-button severity="secondary" label="فراموشی گذرواژه" variant="text"
                                        (onClick)="onForgotPassword()" size="small"></p-button>
                                </div>
                            </div>
                            <!-- arrow buttons -->
                            <div class="flex w-full justify-between">
                                <p-button (onClick)="goToStep(1)" icon="pi pi-arrow-right" variant="text"
                                    severity="secondary" size="small" rounded="true"></p-button>
                                <p-button [disabled]="!loginForm.valid" (onClick)="login()" icon="pi pi-arrow-left"
                                    label="ورود" rounded="true" severity="primary" size="small"></p-button>
                            </div>
                        </ng-template>
                    </p-step-panel>
                    <!-- conditional step if the use is not authenticated their phone number -->
                    <p-step-panel [value]="3">
                        <ng-template #content let-activateCallback="activateCallback">
                            <!-- logo div -->
                            <div class="flex mb-5 justify-center">
                                <svg class="w-35" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 101">
                                    <path fill="#ffffff00"
                                        d="M188.4,77.88c.04-.18,.08-.35,.12-.53-.92-.31-1.83-.68-2.76-.93-6.93-1.84-14.1-3.07-20.76-5.6-12.23-4.64-22.1-13.14-31.99-21.45-.22-.19-.05-1.32,.28-1.61,3.55-3.04,7.1-6.1,10.79-8.96,9.03-7.01,18.35-13.52,29.76-16.19,1.14-.27,1.64-.09,2.19,1,4.78,9.45,11.16,17.48,20.6,22.69,.53,.29,1.17,.49,1.77,.53,1.24,.08,2.5,.01,3.75,.03,.73,.01,1.45,.08,2.68,.16-1.14-.78-1.84-1.25-2.53-1.73,.91-.33,1.67-.22,2.39,0,4.87,1.54,9.72,3.13,14.59,4.63,.95,.29,1.99,.28,2.99,.41-6.36-2.71-13.85-2.93-18.7-9.79,4.05,.33,7.39,3.07,11.13,1.22-.61-1.19-4.22-2.03-.27-4-2.07-1.15-3.9-2.12-5.68-3.15-7.98-4.59-15.17-10.11-19.16-18.7-1.43-3.07-3.42-5.27-6.09-7.09-.79-.54-1.5-1.24-2.35-1.65-.89-.43-1.92-.87-2.87-.82-9,.46-17.4,3.08-25.31,7.37-11.31,6.14-21.46,13.87-30.87,22.6-1.24,1.15-1.94,1.11-3.21,0-5.4-4.74-10.86-9.44-16.42-14-13.4-10.99-28.24-17.92-46.14-15.79-13.86,1.65-26.14,6.71-35.6,17.32-7.28,8.16-10.86,17.75-9.47,28.81,1.36,10.87,6.97,19.37,15.37,26.08,11.99,9.57,25.85,13.2,40.96,11.77,7.48-.71,14.03-4.38,20.51-8,11.5-6.44,21.6-14.79,31.71-23.13,.88-.73,1.4-.88,2.37-.02,9.48,8.45,19.97,15.58,31.36,21,10.33,4.92,21.47,7.7,33.12,6.25,2.13-.27,4.67-1.58,5.92-3.24,1.15-1.52,2.33-2.1,3.87-2.59,.38-.12,.74-.33,1.1-.5,0-.2,0-.4,0-.6-3.77-.41-7.54-.82-11.31-1.23,.02-.21,.03-.41,.05-.62h2.09Z" />
                                    <path fill="var(--p-primary-50)"
                                        d="M188.4,77.88h-2.09c-.02,.21-.03,.41-.05,.62,3.77,.41,7.54,.82,11.31,1.23,0,.2,0,.4,0,.6-.37,.17-.72,.37-1.1,.5-1.54,.49-2.72,1.07-3.87,2.59-1.25,1.66-3.79,2.98-5.92,3.24-11.65,1.45-22.79-1.33-33.12-6.25-11.39-5.43-21.88-12.56-31.36-21-.97-.86-1.49-.71-2.37,.02-10.11,8.34-20.21,16.69-31.71,23.13-6.48,3.63-13.03,7.29-20.51,8-15.11,1.43-28.96-2.2-40.96-11.77-8.4-6.7-14.01-15.2-15.37-26.08-1.39-11.06,2.2-20.65,9.47-28.81C30.21,13.29,42.5,8.23,56.36,6.57c17.89-2.14,32.73,4.8,46.14,15.79,5.56,4.56,11.01,9.25,16.42,14,1.26,1.11,1.96,1.16,3.21,0,9.41-8.73,19.56-16.46,30.87-22.6,7.91-4.29,16.3-6.91,25.31-7.37,.95-.05,1.98,.4,2.87,.82,.85,.41,1.56,1.11,2.35,1.65,2.67,1.81,4.67,4.02,6.09,7.09,3.99,8.58,11.17,14.1,19.16,18.7,1.79,1.03,3.61,2,5.68,3.15-3.95,1.97-.34,2.81,.27,4-3.75,1.85-7.08-.89-11.13-1.22,4.85,6.86,12.34,7.07,18.7,9.79-1-.13-2.04-.12-2.99-.41-4.88-1.5-9.73-3.09-14.59-4.63-.72-.23-1.48-.34-2.39,0,.69,.47,1.39,.95,2.53,1.73-1.23-.07-1.96-.14-2.68-.16-1.25-.02-2.5,.05-3.75-.03-.6-.04-1.24-.24-1.77-.53-9.44-5.21-15.82-13.25-20.6-22.69-.55-1.09-1.05-1.27-2.19-1-11.41,2.66-20.72,9.18-29.76,16.19-3.69,2.86-7.24,5.92-10.79,8.96-.33,.29-.5,1.42-.28,1.61,9.89,8.31,19.76,16.8,31.99,21.45,6.67,2.53,13.83,3.76,20.76,5.6,.94,.25,1.84,.62,2.76,.93-.04,.18-.08,.35-.12,.53Zm-126.11-3.04c1.24-.12,2.66-.1,4.01-.41,1.82-.42,3.65-.93,5.37-1.66,13.91-5.85,25.72-14.91,37.08-24.63,.19-.16,.08-1.03-.17-1.27-7.11-6.77-14.65-12.99-23.12-18.01-15.86-9.4-34.39-8.72-48.1,1.69-12.56,9.54-13.57,23.54-2.21,34.44,7.47,7.16,16.99,9.27,27.14,9.84Z" />
                                    <path fill="#ffffff00"
                                        d="M62.29,74.83c-10.15-.58-19.67-2.68-27.14-9.84-11.37-10.9-10.35-24.9,2.21-34.44,13.71-10.41,32.24-11.09,48.1-1.69,8.47,5.01,16.01,11.24,23.12,18.01,.25,.24,.36,1.11,.17,1.27-11.36,9.71-23.16,18.77-37.08,24.63-1.72,.72-3.55,1.24-5.37,1.66-1.35,.31-2.77,.3-4.01,.41Z" />
                                </svg>
                            </div>
                            <!-- main div with animations -->
                            <div class="flex flex-col items-center gap-3 mt-0 m-1" [ngClass]="{
                                    'slide-in-right' : direction === 'backward' && activeStep === 2 ,
                                    'slide-in-left' : direction === 'forward' && activeStep === 2 ,
                                }">
                                <h2 class="text-xl">جایی برای نفس کشیدن</h2>
                                <div class="text-sm h-5">
                                    <div *ngIf="otpTimer() as timer">
                                        {{ timer * 1000 | date:'mm:ss': 'UTC' | persianDigits}}
                                    </div>
                                </div>
                                <div class="w-full items-center mt-0 flex flex-col gap-2">
                                    <p-inputotp (onChange)="normalizeDigits($event.value)" [length]="6"
                                        formControlName="otp" [integerOnly]="true"
                                        style="direction: ltr !important; text-align: left;" />
                                    <p-button (onClick)="sendOtp()" [disabled]="(otpTimer() > 0)" variant="text"
                                        size="small" severity="secondary">
                                        ارسال دوباره ی کد تایید
                                    </p-button>
                                </div>
                            </div>
                            <!-- arrow buttons -->
                            <div class="flex w-full justify-between">
                                <p-button (onClick)="goToStep(2)" icon="pi pi-arrow-right" variant="text"
                                    severity="secondary" size="small" rounded="true"></p-button>
                                <p-button [disabled]="!(otp.valid)" (onClick)="verifyOTP()" icon="pi pi-arrow-left"
                                    rounded="true" severity="primary" label="تایید" size="small"></p-button>
                            </div>
                        </ng-template>
                    </p-step-panel>
                </form>
                <!-- welcoming panel -->
                <p-step-panel [value]="4">
                    <ng-template #content let-activateCallback="activateCallback">
                        <!-- logo div -->
                        <div class="flex mb-5 justify-center">
                            <svg class="w-35" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 101">
                                <path fill="#ffffff00"
                                    d="M188.4,77.88c.04-.18,.08-.35,.12-.53-.92-.31-1.83-.68-2.76-.93-6.93-1.84-14.1-3.07-20.76-5.6-12.23-4.64-22.1-13.14-31.99-21.45-.22-.19-.05-1.32,.28-1.61,3.55-3.04,7.1-6.1,10.79-8.96,9.03-7.01,18.35-13.52,29.76-16.19,1.14-.27,1.64-.09,2.19,1,4.78,9.45,11.16,17.48,20.6,22.69,.53,.29,1.17,.49,1.77,.53,1.24,.08,2.5,.01,3.75,.03,.73,.01,1.45,.08,2.68,.16-1.14-.78-1.84-1.25-2.53-1.73,.91-.33,1.67-.22,2.39,0,4.87,1.54,9.72,3.13,14.59,4.63,.95,.29,1.99,.28,2.99,.41-6.36-2.71-13.85-2.93-18.7-9.79,4.05,.33,7.39,3.07,11.13,1.22-.61-1.19-4.22-2.03-.27-4-2.07-1.15-3.9-2.12-5.68-3.15-7.98-4.59-15.17-10.11-19.16-18.7-1.43-3.07-3.42-5.27-6.09-7.09-.79-.54-1.5-1.24-2.35-1.65-.89-.43-1.92-.87-2.87-.82-9,.46-17.4,3.08-25.31,7.37-11.31,6.14-21.46,13.87-30.87,22.6-1.24,1.15-1.94,1.11-3.21,0-5.4-4.74-10.86-9.44-16.42-14-13.4-10.99-28.24-17.92-46.14-15.79-13.86,1.65-26.14,6.71-35.6,17.32-7.28,8.16-10.86,17.75-9.47,28.81,1.36,10.87,6.97,19.37,15.37,26.08,11.99,9.57,25.85,13.2,40.96,11.77,7.48-.71,14.03-4.38,20.51-8,11.5-6.44,21.6-14.79,31.71-23.13,.88-.73,1.4-.88,2.37-.02,9.48,8.45,19.97,15.58,31.36,21,10.33,4.92,21.47,7.7,33.12,6.25,2.13-.27,4.67-1.58,5.92-3.24,1.15-1.52,2.33-2.1,3.87-2.59,.38-.12,.74-.33,1.1-.5,0-.2,0-.4,0-.6-3.77-.41-7.54-.82-11.31-1.23,.02-.21,.03-.41,.05-.62h2.09Z" />
                                <path fill="var(--p-primary-50)"
                                    d="M188.4,77.88h-2.09c-.02,.21-.03,.41-.05,.62,3.77,.41,7.54,.82,11.31,1.23,0,.2,0,.4,0,.6-.37,.17-.72,.37-1.1,.5-1.54,.49-2.72,1.07-3.87,2.59-1.25,1.66-3.79,2.98-5.92,3.24-11.65,1.45-22.79-1.33-33.12-6.25-11.39-5.43-21.88-12.56-31.36-21-.97-.86-1.49-.71-2.37,.02-10.11,8.34-20.21,16.69-31.71,23.13-6.48,3.63-13.03,7.29-20.51,8-15.11,1.43-28.96-2.2-40.96-11.77-8.4-6.7-14.01-15.2-15.37-26.08-1.39-11.06,2.2-20.65,9.47-28.81C30.21,13.29,42.5,8.23,56.36,6.57c17.89-2.14,32.73,4.8,46.14,15.79,5.56,4.56,11.01,9.25,16.42,14,1.26,1.11,1.96,1.16,3.21,0,9.41-8.73,19.56-16.46,30.87-22.6,7.91-4.29,16.3-6.91,25.31-7.37,.95-.05,1.98,.4,2.87,.82,.85,.41,1.56,1.11,2.35,1.65,2.67,1.81,4.67,4.02,6.09,7.09,3.99,8.58,11.17,14.1,19.16,18.7,1.79,1.03,3.61,2,5.68,3.15-3.95,1.97-.34,2.81,.27,4-3.75,1.85-7.08-.89-11.13-1.22,4.85,6.86,12.34,7.07,18.7,9.79-1-.13-2.04-.12-2.99-.41-4.88-1.5-9.73-3.09-14.59-4.63-.72-.23-1.48-.34-2.39,0,.69,.47,1.39,.95,2.53,1.73-1.23-.07-1.96-.14-2.68-.16-1.25-.02-2.5,.05-3.75-.03-.6-.04-1.24-.24-1.77-.53-9.44-5.21-15.82-13.25-20.6-22.69-.55-1.09-1.05-1.27-2.19-1-11.41,2.66-20.72,9.18-29.76,16.19-3.69,2.86-7.24,5.92-10.79,8.96-.33,.29-.5,1.42-.28,1.61,9.89,8.31,19.76,16.8,31.99,21.45,6.67,2.53,13.83,3.76,20.76,5.6,.94,.25,1.84,.62,2.76,.93-.04,.18-.08,.35-.12,.53Zm-126.11-3.04c1.24-.12,2.66-.1,4.01-.41,1.82-.42,3.65-.93,5.37-1.66,13.91-5.85,25.72-14.91,37.08-24.63,.19-.16,.08-1.03-.17-1.27-7.11-6.77-14.65-12.99-23.12-18.01-15.86-9.4-34.39-8.72-48.1,1.69-12.56,9.54-13.57,23.54-2.21,34.44,7.47,7.16,16.99,9.27,27.14,9.84Z" />
                                <path fill="#ffffff00"
                                    d="M62.29,74.83c-10.15-.58-19.67-2.68-27.14-9.84-11.37-10.9-10.35-24.9,2.21-34.44,13.71-10.41,32.24-11.09,48.1-1.69,8.47,5.01,16.01,11.24,23.12,18.01,.25,.24,.36,1.11,.17,1.27-11.36,9.71-23.16,18.77-37.08,24.63-1.72,.72-3.55,1.24-5.37,1.66-1.35,.31-2.77,.3-4.01,.41Z" />
                            </svg>
                        </div>
                        <!-- main div with animations -->
                        <div class="flex flex-col items-center gap-3 mt-0 m-1" [ngClass]="{
                                    'slide-in-right' : direction === 'backward' && activeStep === 2 ,
                                    'slide-in-left' : direction === 'forward' && activeStep === 2 ,
                                }">
                            <h2 class="text-xl">
                                به برکه ی آرامش خوش اومدی
                            </h2>
                            <div class="h-29 text-xl">
                                <h2 *ngIf="user">{{user().username}}</h2>
                            </div>

                        </div>
                        <!-- arrow buttons -->
                        <div class="flex w-full justify-between">
                            <p-button (onClick)="goToStep(2)" icon="pi pi-arrow-right" variant="text"
                                severity="secondary" size="small" rounded="true"></p-button>
                            <p-button (onClick)="onStart()" icon="pi pi-arrow-left" rounded="true" severity="primary"
                                label="شروع" size="small"></p-button>
                        </div>
                    </ng-template>
                </p-step-panel>
            </p-step-panels>
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <!-- steps -->
            <div class="absolute w-1/1 right-0 bottom-2">
                <p-step-list>
                    <p-step [value]="1">
                        <ng-template #content let-activateCallback="activateCallback" let-value="value">
                            <button class="bg-transparent" (click)="goToStep(1)">
                                <span
                                    class="rounded-full text-[var(--p-primary-50)] border-2 w-8 h-8 inline-flex items-center justify-center"
                                    [ngClass]="{
                                'bg-[var(--p-primary-800)]': value <= activeStep,
                            }">
                                    <i class="pi pi-user"></i>
                                </span>
                            </button>
                        </ng-template>
                    </p-step>
                    <p-step [value]="2">
                        <ng-template #content let-activateCallback="activateCallback" let-value="value">
                            <button [disabled]="!phoneNumber.valid" class="bg-transparent" (click)="goToStep(2)">
                                <span
                                    class="rounded-full text-[var(--p-primary-50)] border-2 w-8 h-8 inline-flex items-center justify-center"
                                    [ngClass]="{
                                'bg-[var(--p-primary-800)]': value <= activeStep,
                            }">
                                    <i class="pi pi-lock"></i>
                                </span>
                            </button>
                        </ng-template>
                    </p-step>
                    <!-- conditional step if the use is not authenticated their phone number -->
                    <p-step [value]="3" *ngIf="user() && !(authenticated())">
                        <ng-template #content let-activateCallback="activateCallback" let-value="value">
                            <button class="bg-transparent border-0 inline-flex flex-col gap-2"
                                (click)="activateCallback()">
                                <span
                                    class="rounded-full text-[var(--p-primary-50)] border-2 w-8 h-8 inline-flex items-center justify-center"
                                    [ngClass]="{
                                'bg-[var(--p-primary-800)]': value <= activeStep,
                            }">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="22 5 70 80" x="0px" y="0px">
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M41.29,49.46a1,1,0,0,1-1-1V42.53a1,1,0,0,1,2,0v5.93A1,1,0,0,1,41.29,49.46Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M40.81,66.16a.92.92,0,0,1-.36-.07,1,1,0,0,1-.64-.93v-8a11.55,11.55,0,0,1-7.63-19.71A11.44,11.44,0,0,1,40.33,34h36a11.55,11.55,0,0,1,0,23.09H49.57l-8,8.71A1,1,0,0,1,40.81,66.16ZM40.33,36a9.54,9.54,0,0,0-9.54,9.55,9.55,9.55,0,0,0,9.54,9.54h.48a1,1,0,0,1,1,1V62.6l6.59-7.15a1,1,0,0,1,.73-.32H76.34a9.55,9.55,0,0,0,0-19.09Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M38.63,48.14a1,1,0,0,1-.5-1.86l5.13-3a1,1,0,1,1,1,1.74l-5.13,3A1,1,0,0,1,38.63,48.14Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M44,48.14a1,1,0,0,1-.5-.13l-5.14-3a1,1,0,0,1,1-1.74l5.14,3a1,1,0,0,1-.5,1.86Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M52.65,49.46a1,1,0,0,1-1-1V42.53a1,1,0,0,1,2,0v5.93A1,1,0,0,1,52.65,49.46Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M50,48.14a1,1,0,0,1-.87-.5,1,1,0,0,1,.37-1.36l5.13-3a1,1,0,1,1,1,1.74l-5.13,3A1,1,0,0,1,50,48.14Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M55.32,48.14a1,1,0,0,1-.5-.13l-5.14-3a1,1,0,0,1,1-1.74l5.14,3a1,1,0,0,1-.5,1.86Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M64,49.46a1,1,0,0,1-1-1V42.53a1,1,0,0,1,2,0v5.93A1,1,0,0,1,64,49.46Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M61.35,48.14a1,1,0,0,1-.87-.5,1,1,0,0,1,.37-1.36l5.13-3a1,1,0,0,1,1,1.74l-5.13,3A1,1,0,0,1,61.35,48.14Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M66.68,48.14a1,1,0,0,1-.5-.13l-5.14-3a1,1,0,0,1-.36-1.37A1,1,0,0,1,62,43.31l5.14,3a1,1,0,0,1-.5,1.86Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M75.38,49.46a1,1,0,0,1-1-1V42.53a1,1,0,0,1,2,0v5.93A1,1,0,0,1,75.38,49.46Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M72.71,48.14a1,1,0,0,1-.87-.5,1,1,0,0,1,.37-1.36l5.14-3a1,1,0,0,1,1,1.74l-5.14,3A1,1,0,0,1,72.71,48.14Z" />
                                        <path fill="var(--p-primary-50)" stroke="var(--p-primary-50)"
                                            d="M78,48.14a1,1,0,0,1-.5-.13l-5.14-3A1,1,0,0,1,72,43.68a1,1,0,0,1,1.36-.37l5.14,3a1,1,0,0,1,.37,1.36A1,1,0,0,1,78,48.14Z" />
                                    </svg>
                                </span>
                            </button>
                        </ng-template>
                    </p-step>
                    <p-step [value]="4">
                        <ng-template #content let-activateCallback="activateCallback" let-value="value">
                            <button [disabled]="!loginForm.valid"
                                class="bg-transparent border-0 inline-flex flex-col gap-2">
                                <span
                                    class="rounded-full text-[var(--p-primary-50)] border-2 w-8 h-8 inline-flex items-center justify-center"
                                    [ngClass]="{
                                'bg-[var(--p-primary-800)]': value <= activeStep,
                            }">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 101">
                                        <path fill="#ffffff00"
                                            d="M188.4,77.88c.04-.18,.08-.35,.12-.53-.92-.31-1.83-.68-2.76-.93-6.93-1.84-14.1-3.07-20.76-5.6-12.23-4.64-22.1-13.14-31.99-21.45-.22-.19-.05-1.32,.28-1.61,3.55-3.04,7.1-6.1,10.79-8.96,9.03-7.01,18.35-13.52,29.76-16.19,1.14-.27,1.64-.09,2.19,1,4.78,9.45,11.16,17.48,20.6,22.69,.53,.29,1.17,.49,1.77,.53,1.24,.08,2.5,.01,3.75,.03,.73,.01,1.45,.08,2.68,.16-1.14-.78-1.84-1.25-2.53-1.73,.91-.33,1.67-.22,2.39,0,4.87,1.54,9.72,3.13,14.59,4.63,.95,.29,1.99,.28,2.99,.41-6.36-2.71-13.85-2.93-18.7-9.79,4.05,.33,7.39,3.07,11.13,1.22-.61-1.19-4.22-2.03-.27-4-2.07-1.15-3.9-2.12-5.68-3.15-7.98-4.59-15.17-10.11-19.16-18.7-1.43-3.07-3.42-5.27-6.09-7.09-.79-.54-1.5-1.24-2.35-1.65-.89-.43-1.92-.87-2.87-.82-9,.46-17.4,3.08-25.31,7.37-11.31,6.14-21.46,13.87-30.87,22.6-1.24,1.15-1.94,1.11-3.21,0-5.4-4.74-10.86-9.44-16.42-14-13.4-10.99-28.24-17.92-46.14-15.79-13.86,1.65-26.14,6.71-35.6,17.32-7.28,8.16-10.86,17.75-9.47,28.81,1.36,10.87,6.97,19.37,15.37,26.08,11.99,9.57,25.85,13.2,40.96,11.77,7.48-.71,14.03-4.38,20.51-8,11.5-6.44,21.6-14.79,31.71-23.13,.88-.73,1.4-.88,2.37-.02,9.48,8.45,19.97,15.58,31.36,21,10.33,4.92,21.47,7.7,33.12,6.25,2.13-.27,4.67-1.58,5.92-3.24,1.15-1.52,2.33-2.1,3.87-2.59,.38-.12,.74-.33,1.1-.5,0-.2,0-.4,0-.6-3.77-.41-7.54-.82-11.31-1.23,.02-.21,.03-.41,.05-.62h2.09Z" />
                                        <path fill="#ffffff"
                                            d="M188.4,77.88h-2.09c-.02,.21-.03,.41-.05,.62,3.77,.41,7.54,.82,11.31,1.23,0,.2,0,.4,0,.6-.37,.17-.72,.37-1.1,.5-1.54,.49-2.72,1.07-3.87,2.59-1.25,1.66-3.79,2.98-5.92,3.24-11.65,1.45-22.79-1.33-33.12-6.25-11.39-5.43-21.88-12.56-31.36-21-.97-.86-1.49-.71-2.37,.02-10.11,8.34-20.21,16.69-31.71,23.13-6.48,3.63-13.03,7.29-20.51,8-15.11,1.43-28.96-2.2-40.96-11.77-8.4-6.7-14.01-15.2-15.37-26.08-1.39-11.06,2.2-20.65,9.47-28.81C30.21,13.29,42.5,8.23,56.36,6.57c17.89-2.14,32.73,4.8,46.14,15.79,5.56,4.56,11.01,9.25,16.42,14,1.26,1.11,1.96,1.16,3.21,0,9.41-8.73,19.56-16.46,30.87-22.6,7.91-4.29,16.3-6.91,25.31-7.37,.95-.05,1.98,.4,2.87,.82,.85,.41,1.56,1.11,2.35,1.65,2.67,1.81,4.67,4.02,6.09,7.09,3.99,8.58,11.17,14.1,19.16,18.7,1.79,1.03,3.61,2,5.68,3.15-3.95,1.97-.34,2.81,.27,4-3.75,1.85-7.08-.89-11.13-1.22,4.85,6.86,12.34,7.07,18.7,9.79-1-.13-2.04-.12-2.99-.41-4.88-1.5-9.73-3.09-14.59-4.63-.72-.23-1.48-.34-2.39,0,.69,.47,1.39,.95,2.53,1.73-1.23-.07-1.96-.14-2.68-.16-1.25-.02-2.5,.05-3.75-.03-.6-.04-1.24-.24-1.77-.53-9.44-5.21-15.82-13.25-20.6-22.69-.55-1.09-1.05-1.27-2.19-1-11.41,2.66-20.72,9.18-29.76,16.19-3.69,2.86-7.24,5.92-10.79,8.96-.33,.29-.5,1.42-.28,1.61,9.89,8.31,19.76,16.8,31.99,21.45,6.67,2.53,13.83,3.76,20.76,5.6,.94,.25,1.84,.62,2.76,.93-.04,.18-.08,.35-.12,.53Zm-126.11-3.04c1.24-.12,2.66-.1,4.01-.41,1.82-.42,3.65-.93,5.37-1.66,13.91-5.85,25.72-14.91,37.08-24.63,.19-.16,.08-1.03-.17-1.27-7.11-6.77-14.65-12.99-23.12-18.01-15.86-9.4-34.39-8.72-48.1,1.69-12.56,9.54-13.57,23.54-2.21,34.44,7.47,7.16,16.99,9.27,27.14,9.84Z" />
                                        <path fill="#ffffff00"
                                            d="M62.29,74.83c-10.15-.58-19.67-2.68-27.14-9.84-11.37-10.9-10.35-24.9,2.21-34.44,13.71-10.41,32.24-11.09,48.1-1.69,8.47,5.01,16.01,11.24,23.12,18.01,.25,.24,.36,1.11,.17,1.27-11.36,9.71-23.16,18.77-37.08,24.63-1.72,.72-3.55,1.24-5.37,1.66-1.35,.31-2.77,.3-4.01,.41Z" />
                                    </svg>
                                </span>
                            </button>
                        </ng-template>
                    </p-step>
                </p-step-list>
            </div>
        </p-stepper>
    </div>
    <p-toast position="center" [style]="{'z-index': '10000'}" [baseZIndex]="10000">
    </p-toast>
</div>